<section class="master_container">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-12">
        <div class="button_row">
          <ul>
            <li><button mat-button class="btn btn-info" (click)="showList('add')"><i
                  class="material-icons">add</i>Add</button></li>
            <li><button mat-button class="btn btn-success" (click)="showList('list')"><i
                  class="material-icons">list</i>List</button></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>
<div class="progress_loader_box" *ngIf="status == false">
  <div class="progress-loader"> <mat-progress-spinner [mode]="'indeterminate'"></mat-progress-spinner>
  </div>
</div>
<form [formGroup]="userForm" autocomplete="off" *ngIf="isHidden==true">
  <section class="master_container">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-12">
          <fieldset class="axd" style="padding-top:15px;">
            <legend>Purchase Order Details</legend>
            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-12 ac posr">
                  <label style="font-weight: normal; padding-right: 15px;">Purchase Order For:</label>
                  <input formControlName="ser_item_type" [(ngModel)]="model.ser_item_type" type="radio" value="true"
                    [checked]="1" (change)="onChangeOrderFor('true')" /> Material &nbsp; &nbsp;
                  <input type="radio" formControlName="ser_item_type" [(ngModel)]="model.ser_item_type" value="false"
                    (change)="onChangeOrderFor('false')"> Services
                </div>
              </div>
            </div>
            <div class="ht_15"></div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <label for="Date">Order Date</label>
                <input type="date" class="form-control" [(ngModel)]="currentDate" formControlName="ord_date"
                  (change)="onChangeOrderDate($event)">
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label for="Service / Item Sub Type">PO Type<span class="red">*</span></mat-label>
                <mat-select-autocomplete class="form-control ats" [options]="itemtypes" [display]="'item_name'"
                  [value]="'item_id'" [multiple]='false' ngDefaultControl
                  [formControl]="userForm.controls['ser_item_subtype']"
                  (selectionChange)="onChangePOType($event, 'create')">
                </mat-select-autocomplete>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>PO Sub Type<span class="red">*</span></mat-label>
                <!-- <mat-select-autocomplete class="form-control ats"  
                    [options]="poSubTypeList"
                    [display]="'display'"
                    [value]="'display'"
                    [multiple]='false'
                    (selectionChange)="onChangePOSubType($event)"
                    ngDefaultControl
                    [formControl]="userForm.controls['pur_ord_type']">
                  </mat-select-autocomplete> -->

                <mat-select formControlName="pur_ord_type" (selectionChange)="onChangePOSubType($event.value)"
                  [(ngModel)]="purordtype" class="form-control" [disabled]="norwamaterial">
                  <mat-option value="0">Choosen an option</mat-option>
                  <mat-option value="Camp Purchase">CAMP PURCHASE</mat-option>

                  <mat-option value="E-Open Purchase">OPEN MARKET PURCHASE</mat-option>
                  <mat-option value="Hat Purchase">HAT PURCHASE</mat-option>
                  <!-- <mat-option value="PDS Purchase">PDS PURCHASE</mat-option>  -->
                  <mat-option value="GOVT Purchase">GOVT PURCHASE</mat-option>
                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <label for="Order No.">Order Number</label>
                <input type="text" class="form-control" [(ngModel)]="seq_no" formControlName="pur_order_no" readonly />
              </div>
            </div>

            <!-- <div class="col-lg-3 col-md-4 col-sm-6 col-12" >
                  <div class="form-group shs" style="height: 54px;">
                    <label>&nbsp;</label>
                    <button class="btn btn-info" (click)="openSupplierDialog()">Select Supplier<span class="red">*</span></button>
                  </div>
                </div>  -->

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Channel Required</mat-label>
                <mat-select formControlName="channel_req" [(ngModel)]="Channelreq" class="form-control"
                  (selectionChange)="onChangechannelreq($event.value)">
                  <mat-option value="No">NO</mat-option>
                  <mat-option value="Yes">YES</mat-option>
                </mat-select>
              </div>
            </div>


            <div class="col-lg-3 col-md-4 col-sm-6 col-12" *ngIf="showchannel">
              <div class="form-group">
                <mat-label>Supplier Channel</mat-label>
                <mat-select-autocomplete class="form-control ats" [options]="channel_master_list"
                  [display]="'channel_desc'" [value]="'channel_custid'" [multiple]='false' ngDefaultControl
                  [formControl]="userForm.controls['sup_channel']" (selectionChange)="onChangeSupplierChannel($event)">
                </mat-select-autocomplete>
              </div>
            </div>


            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Supplier Name<span class="red">*</span></mat-label>
                <mat-select-autocomplete class="form-control ats" [options]="supplierNames" [display]="'bp_name'"
                  [value]="'bp_Id'" [multiple]='false' (selectionChange)="onChangeSupplierName($event)" ngDefaultControl
                  [formControl]="userForm.controls['supplier_name']">
                </mat-select-autocomplete>
              </div>
            </div>


            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Bussiness Unit<span class="red">*</span></mat-label>
                <mat-select-autocomplete class="form-control ats" [options]="bussiness_unit_list"
                  [display]="'businessunit_name'" [value]="'businessunit_id'" [multiple]='false' ngDefaultControl
                  [(ngModel)]="BuUnit" [formControl]="userForm.controls['businessunit']">
                </mat-select-autocomplete>
                <!-- <mat-select formControlName="businessunit" [(ngModel)]="model.businessunit" class="form-control" (selectionChange)="getCompanyBUAddressid($event.value)">
                      <mat-option value="0">-select-</mat-option>
                      <mat-option *ngFor="let list of bussiness_unit_list" [value]="list.businessunit_id" >{{list.businessunit_name}}</mat-option>
                    </mat-select> -->
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Advice Required</mat-label>
                <mat-select formControlName="advice_req" [(ngModel)]="model.advice_req" class="form-control"
                  (selectionChange)="onChangeAdvice($event.value)">

                  <mat-option value="No">NO</mat-option>
                  <mat-option value="Yes">YES</mat-option>
                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group ">
                <mat-label>PO Fulfillment By Advice Count<span class="red">*</span></mat-label>
                <mat-select formControlName="po_fullfillment" [(ngModel)]="po_fullfillment1" class="form-control"
                  (selectionChange)="onChangeAdviceCount($event.value)">
                  <mat-option value="0">Choosen an option</mat-option>
                  <mat-option value="No">NO</mat-option>
                  <div #displayoptions>
                    <mat-option value="Yes">YES</mat-option>
                  </div>
                </mat-select>
              </div>
            </div>

            <!-- <div class="col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="show_no_advance == true"> -->
            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <label for="No Of Advice">No Of Advice</label>
                <input type="number" min="0" class="form-control" [(ngModel)]="model.no_of_advice"
                  formControlName="no_of_advice" (focusout)="noofadv()" [readonly]="show_no_advance">
              </div>
            </div>

            <!-- <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label for="Referance Type">Referance Type</mat-label>
                    <mat-select-autocomplete class="form-control ats"  
                    [options]="ReferenceTypeList"
                    [display]="'display'"
                    [value]="'value'"
                    [multiple]='false'
                    (selectionChange)="onChangeReferenceType($event)"
                    ngDefaultControl
                    [formControl]="userForm.controls['referance_type']">
                    </mat-select-autocomplete>
                  </div>
                </div> -->
            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Referance Type<span class="red">*</span></mat-label>
                <mat-select class="form-control" [(ngModel)]="referancetype" formControlName="referance_type"
                  (selectionChange)="onChangeReferenceType($event.value)">
                  <mat-option value="1">Choosen an option</mat-option>
                  <mat-option value="pur004">FROM ENQUIRY</mat-option>
                  <mat-option value="pur003">From INDENT</mat-option>
                  <mat-option value="pur006">From Quotation</mat-option>
                  <mat-option value="0">OPEN PURCHASE ORDER</mat-option>
                  <mat-option value="frompo">FROM PURCHASE ORDER</mat-option>
                </mat-select>
              </div>
            </div>


            <div class="col-lg-3 col-md-3 col-sm-6 col-12"
              *ngIf="(model.referance_type == 'pur006' || model.referance_type == 'pur004' || model.referance_type == 'pur003') && action == 'update'">
              <div class="form-group">
                <label>&nbsp;</label>
                <button class="btn btn-info" (click)=" onClickShow()">Show </button>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label for="Party Ref. Document No.">Party Ref. Document No.</mat-label>
                <input class="form-control" [(ngModel)]="model.pref_doc_no" formControlName="pref_doc_no"
                  value={{prefDocNo}} [readonly]="isReadOnly" />
              </div>
            </div>


            <!-- <div *ngIf="poRC_status;else elseBlock10"> -->
            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Receipt Criteria<span class="red">*</span></mat-label>
                <mat-select formControlName="receipt_criteria" [(ngModel)]="receiptcriteria" class="form-control">
                  <mat-option value="0">Choosen an option</mat-option>
                  <mat-option value="1">Advice Weight</mat-option>
                  <mat-option value="2">Recieving Weight</mat-option>
                  <mat-option value="3">Lower Weight</mat-option>
                  <mat-option value="NA">NA</mat-option>
                </mat-select>
              </div>
            </div>
            <!-- </div> 
            <ng-template #elseBlock10>
              div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                  <mat-label>Total Quantity</mat-label>
                  <div class="clr"></div>
                  <input  formControlName="receipt_criteria" [(ngModel)]="receiptcriteria" class="form-control" [readonly]="true" >
                </div>
              </div>
            </ng-template> -->
            <!-- changes on 14-04-2022 -->
            <div class="col-lg-3 col-md-4 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Total Quantity</mat-label>
                <div class="clr"></div>
                <input formControlName="total_qty" [(ngModel)]="totalqty" class="form-control" [readonly]="true">
              </div>
            </div>



            <div class="col-lg-3 col-md-4 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>UoM<span class="red">*</span></mat-label>
                <mat-select formControlName="staticuom" [(ngModel)]="staticuoms" class="form-control"
                  (selectionChange)="onChangeBrokerbasis($event.value)" [disabled]="nouom">
                  <mat-option *ngFor="let uom of customUOMs" [value]="uom.customuom_id">{{uom.description}}</mat-option>
                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Advice Without Po<span class="red">*</span></mat-label>
                <mat-select formControlName="tagadvice_status" [(ngModel)]="tagadvice" class="form-control"
                  (selectionChange)="onChangeBrokerchecked($event.value)">
                  <mat-option value="No">No</mat-option>
                  <mat-option value="Yes">Yes</mat-option>

                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Single Item<span class="red">*</span></mat-label>
                <mat-select formControlName="poitemnumber" [(ngModel)]="po_itemnumber" class="form-control"
                  [disabled]="storepurchase">
                  <mat-option value="No">No</mat-option>
                  <mat-option value="Yes">Yes</mat-option>
                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Consignment type<span class="red">*</span></mat-label>
                <mat-select formControlName="consignment_type" [(ngModel)]="Consignment_type" class="form-control">
                  <mat-option value="No">No</mat-option>
                  <mat-option value="Yes">Yes</mat-option>
                </mat-select>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <label>Document No</label>
                <input type="text" class="form-control" formControlName="document_no">
              </div>
            </div>

            <!-- changes on 14-04-2022 ends -->

            <div class="col-lg-4 col-md-4 col-sm-6 col-12" *ngIf="action == 'update'">
              <div class="form-group" *ngIf="model.referance_type == 'From Indent'">
                <label>&nbsp;</label>
                <div class="clr"></div>
                <button mat-button class="btn btn-info">Indent</button>
              </div>
              <div class="form-group" *ngIf="model.referance_type == 'From Enquiry'">
                <label>&nbsp;</label>
                <div class="clr"></div>
                <button mat-button class="btn btn-info">Enquiry</button>
              </div>
              <div class="form-group" *ngIf="model.referance_type == 'From Quotation'">
                <label>&nbsp;</label>
                <div class="clr"></div>
                <button mat-button class="btn btn-info">Quotation</button>
              </div>
            </div>

            <div class="singel">

              <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                <div class="form-group chk_tp_pad">
                  <!-- <mat-checkbox [(ngModel)]="musterRollRequiredIsChecked" formControlName="master_roll_required" disabled>Muster Roll Required</mat-checkbox> -->
                  <mat-checkbox [(ngModel)]="model.master_roll_required" formControlName="master_roll_required">Muster
                    Roll Required </mat-checkbox>
                </div>
              </div>

              <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                <div class="form-group chk_tp_pad">
                  <mat-checkbox [(ngModel)]="model.broker_info" formControlName="broker_info"
                    (change)="onChangeBrokerDetailsDisplay($event)" [disabled]="disabebroker">Broker Info. Required
                  </mat-checkbox>
                </div>
              </div>

              <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                <div class="form-group chk_tp_pad">
                  <mat-checkbox [(ngModel)]="model.madvice_sin_grn" formControlName="madvice_sin_grn"
                    (change)="hideitemrow($event)">Multiple Advice In Single GRN</mat-checkbox>
                </div>
              </div>

              <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                <div class="form-group chk_tp_pad">
                  <mat-checkbox [(ngModel)]="model.weightment_req" formControlName="weightment_req"
                    [disabled]="disabeWeighment" (change)="uomchanged($event)">Weightment Required </mat-checkbox>
                </div>
              </div>

            </div>
          </fieldset>
        </div>
      </div>

      <div class="dyn_table_conent" style="border: none;">
        <!-- <mat-tab-group animationDuration="1000ms" (selectedTabChange)="getIndexOfMatTab($event)"> -->
        <mat-tab-group animationDuration="1000ms">
          <mat-tab label="Service / Item Details">
            <div class="dyn_table_conent">
              <div class="dyn_table_header">
                <label class="label_col">
                  <h3>Action</h3>
                </label>
                <label class="label_col">
                  <h3 class="srln">Srl No</h3>
                </label>
                <label class="label_col">
                  <h3 class="i_nam">Item Name<span class="red">*</span></h3>
                </label>
                <label class="label_col" *ngIf="storepurchase">
                  <h3 class="i_nam">Store Item<span class="red">*</span></h3>
                </label>
                <label class="label_col">
                  <h3 class="i_nam">Packing Item<span class="red">*</span></h3>
                </label>
                <!-- <label class="label_col" *ngIf="potype_packing">
                  <h3>Code</h3>
                </label>
                <label class="label_col" *ngIf="potype_packing">
                  <h3>Size</h3>
                </label>
                <label class="label_col" *ngIf="potype_packing">
                  <h3>Weight</h3>
                </label>
                <label class="label_col" *ngIf="potype_packing">
                  <h3>Laminated/Non-Laminated</h3>
                </label> -->
                <label class="label_col">
                  <h3>Packing UOM</h3>
                </label>
                <label class="label_col">
                  <h3>Packing Qty</h3>
                </label>
                <label class="label_col">
                  <h3>Item UOM</h3>
                </label>
                <label class="label_col">
                  <h3>Item Qty</h3>
                </label>
                <label class="label_col">
                  <h3>Conversion <br>Factor</h3>
                </label>
                <label class="label_col">
                  <h3>Mat Wt</h3>
                </label>
                <label class="label_col">
                  <h3>Price</h3>
                </label>
                <label class="label_col">
                  <h3>Price Based on<span class="red">*</span></h3>
                </label>
                <label class="label_col">
                  <h3>Amount</h3>
                </label>
                <label class="label_col">
                  <h3>Taxable Amt</h3>
                </label>
                <label class="label_col">
                  <h3>Disocunt</h3>
                </label>
                <label class="label_col">
                  <h3>Discount based on</h3>
                </label>
                <label class="label_col">
                  <h3>Disocunt Amount</h3>
                </label>
                <label class="label_col">
                  <h3>Net Amount</h3>
                </label>
                <label class="label_col">
                  <h3>Tax Code</h3>
                </label>
                <label class="label_col">
                  <h3>Tax Rate(%)</h3>
                </label>

                <label class="label_col">
                  <h3>Tax Amount</h3>
                </label>
                <label class="label_col">
                  <h3>Total Amount</h3>
                </label>
                <label class="label_col">
                  <h3>QC Norms</h3>
                </label>
                <label class="label_col">
                  <h3>Priorioty</h3>
                </label>
                <label class="label_col">
                  <h3 class="date_col">Delivery date</h3>
                </label>
                <label class="label_col">
                  <h3>Purpose</h3>
                </label>
                <label class="label_col">
                  <h3>Where to be used</h3>
                </label>
                <label class="label_col">
                  <h3>Remarks</h3>
                </label>
                <label class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'">
                  <h3>packing List Req</h3>
                </label>
                <label class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'">
                  <h3>packing List</h3>
                </label>
              </div>

              <div *ngIf="potype_status;else elseBlock11">

                <div class="dyn_table_data_cont" formArrayName="pur_Order_Item_Details">
                  <div class="dyn_table" *ngFor="let item of pur_Order_Item_Details.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                    <div class="label_col"><i class="fa fa-trash form-control action"
                        (click)="deleteItem(pointIndex)"></i> </div>
                    <div class="label_col"><input class="form-control srln" type="number" formControlName="slno"
                        readonly /></div>

                    <div class="label_col">
                      <mat-select-autocomplete class="form-control ats i_nam" [options]="itemList"
                        [display]="'item_name'" [value]="'item_id'" [multiple]='false'
                        [selectedOptions]="selectedItemName[pointIndex]"
                        (selectionChange)="onchangeItemName(pointIndex, $event)" ngDefaultControl
                        [formControlName]="'item_code'">
                      </mat-select-autocomplete>
                    </div>

                    <div class="label_col" *ngIf="storepurchase">
                      <mat-select-autocomplete class="form-control ats i_nam"
                        [options]="classified_item_namelist[pointIndex]" [display]="'classified_item_name'"
                        [value]="'classified_item_name'" [multiple]='false'
                        [selectedOptions]="selectedItemNameclassified[pointIndex]"
                        (selectionChange)="onchangeStoreItem(pointIndex, $event)" ngDefaultControl
                        [formControlName]="'classified_item_name'">
                      </mat-select-autocomplete>
                    </div>

                    <div class="label_col">
                      <mat-select-autocomplete class="form-control ats i_nam" [options]="packingItem[pointIndex]"
                        [display]="'item_name'" [value]="'item_code'" [multiple]='false'
                        (selectionChange)="onchangePackingItem(pointIndex, $event)"
                        [selectedOptions]="selectedPackingItem[pointIndex]" ngDefaultControl
                        [formControlName]="'packing_item'">
                      </mat-select-autocomplete>
                    </div>




                    <!-- <div class="label_col" *ngIf="potype_packing"> 
                      <select formControlName="packing_item_code" class="form-control" (change)="onchangePackingItemCode($event, pointIndex)">
                      <option value="0">-Select-</option>
                      <option *ngFor="let packing of packingItemCode[pointIndex]" [value]="packing.master_code">
                        {{packing.master_code}}</option>
                    </select> </div> -->

                    <!-- <div class="label_col" *ngIf="potype_packing"><input class="form-control" type="text" formControlName="packing_size" /></div>
                    <div class="label_col" *ngIf="potype_packing"><input class="form-control" type="text" formControlName="packing_weight" /></div>
                    <div class="label_col" *ngIf="potype_packing"><select formControlName="packing_type" class="form-control" (change)="onchangeLaminate($event, pointIndex)"><option value="LAMINATED">LAMINATED</option><option value="HDPE">HDPE</option><option value="ROLL">ROLL</option></select></div>
                     -->
                    <div class="label_col"><input class="form-control" type="text" formControlName="packing_uom" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="packing_qty"
                        (focusout)="getPackingQty($event, pointIndex)" /></div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="stock_uom" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="stock_qty"
                        (focusout)="getItemQty($event, pointIndex)" />
                      <input class="form-control" type="hidden" formControlName="toleranceqty" readonly />
                    </div>

                    <div class="label_col"><input class="form-control" formControlName="con_factor" type="number" />
                    </div>

                    <div class="label_col"><input class="form-control" type="number" formControlName="mat_weight"
                        (keyup)="getMatWt($event, pointIndex)" readonly /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="price"
                        (keyup)="getPrice($event, pointIndex)" /></div>
                    <div class="label_col"><select class="form-control" formControlName="price_based_on"
                        (change)="onChangePriceBasedOn($event, pointIndex)">
                        <option value="0">-Select-</option>
                        <optgroup label="Packing">
                          <option value="Packing">Packing</option>
                        </optgroup>
                        <optgroup label="Item">
                          <option value="With Packing">WITH PACKING</option>
                          <option value="Without Packing">WITHOUT PACKING</option>
                        </optgroup>
                      </select></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="amount" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="taxable_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="discount"
                        (keyup)="getDiscount($event, pointIndex)" /></div>
                    <div class="label_col"><select class="form-control" formControlName="discount_basedon"
                        (change)="onchangeDiscountBasedOn($event, pointIndex)" type="text">
                        <option value="0">-Select-</option>
                        <option value="Uom">Uom</option>
                        <option value="%">%</option>
                      </select></div>
                    <div class="label_col"><input class="form-control" type="number"
                        formControlName="discount_amount" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="net_amount" />
                    </div>
                    <!-- <div class="label_col"><input class="form-control" type="text" formControlName="tax_code" /><i class="fa fa-external-link tax_insert_icon" (click)="showPopUp1(pointIndex)" aria-hidden="true"></i></div> -->
                    <div class="label_col"><input class="form-control" type="text" formControlName="tax_code" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="tax_rate" /></div>

                    <div class="label_col"><input class="form-control" type="number" formControlName="tax_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="total_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="qc_norms" /><i
                        class="fa fa-external-link tax_insert_icon" (click)="showPopUp2(pointIndex)"
                        aria-hidden="true"></i></div>
                    <!-- <div class="label_col"><input class="form-control" type="text" formControlName="qc_norms" /></div> -->
                    <div class="label_col"> <select formControlName="priority" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let priority of priorities" [value]="priority">{{priority}}</option>
                      </select> </div>
                    <div class="label_col" *ngIf="_referenceNo != 'pur006' && _referenceNo != 'pur003'"><input
                        class="form-control date_col" type="date" formControlName="delivery_date" /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur003'"><input
                        class="form-control date_col" type="text" formControlName="delivery_date"
                        (change)="onChangeDeliveryDate($event, pointIndex, 'CFT')" /></div>
                    <div class="label_col"> <select formControlName="purpose" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let purp of purposes" [value]="purp.purpose_id">{{purp.purpose_name}}</option>
                      </select> </div>
                    <div class="label_col"> <select formControlName="to_be_used" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let whereUsed of deptNames" [value]="whereUsed.department_code">
                          {{whereUsed.department_name}}</option>
                      </select> </div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="remarks" /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'"><input
                        class="form-control" type="text" formControlName="packing_list_req" readonly /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'"><input
                        class="form-control" type="text" formControlName="packing_list" readonly /></div>
                  </div>
                </div>
              </div>

              <ng-template #elseBlock11>
                <div class="dyn_table_data_cont" formArrayName="pur_Order_Item_Details">
                  <div class="dyn_table" *ngFor="let item of pur_Order_Item_Details.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                    <div class="label_col"><i class="fa fa-trash form-control action"
                        (click)="deleteItem(pointIndex)"></i> </div>
                    <div class="label_col"><input class="form-control srln" type="number" formControlName="slno"
                        readonly /></div>

                    <div class="label_col">
                      <mat-select-autocomplete class="form-control ats i_nam" [options]="itemList"
                        [display]="'item_name'" [value]="'item_id'" [multiple]='false'
                        [selectedOptions]="selectedItemName[pointIndex]"
                        (selectionChange)="onchangeItemName(pointIndex, $event)" ngDefaultControl
                        [formControlName]="'item_code'">
                      </mat-select-autocomplete>
                    </div>

                    <div class="label_col" *ngIf="storepurchase">
                      <mat-select-autocomplete class="form-control ats i_nam"
                        [options]="classified_item_namelist[pointIndex]" [display]="'classified_item_name'"
                        [value]="'classified_item_name'" [multiple]='false'
                        [selectedOptions]="selectedItemNameclassified[pointIndex]"
                        (selectionChange)="onchangeStoreItem(pointIndex, $event)" ngDefaultControl
                        [formControlName]="'classified_item_name'">
                      </mat-select-autocomplete>
                    </div>

                    <div class="label_col">
                      <mat-select-autocomplete class="form-control ats i_nam" [options]="packingItem[pointIndex]"
                        [display]="'item_name'" [value]="'item_code'" [multiple]='false'
                        (selectionChange)="onchangePackingItem(pointIndex, $event)"
                        [selectedOptions]="selectedPackingItem[pointIndex]" ngDefaultControl
                        [formControlName]="'packing_item'">
                      </mat-select-autocomplete>
                    </div>

                    <!-- <div class="label_col" *ngIf="potype_packing"> 
                      <select formControlName="packing_item_code" class="form-control" (change)="onchangePackingItemCode($event, pointIndex)">
                      <option value="0">-Select-</option>
                      <option *ngFor="let packing of packingItemCode[pointIndex]" [value]="packing.master_code">
                        {{packing.master_code}}</option>
                    </select> </div> -->

                    <!-- <div class="label_col" *ngIf="potype_packing"><input class="form-control" type="text" formControlName="packing_size" readonly/></div>
                    <div class="label_col" *ngIf="potype_packing"><input class="form-control" type="text" formControlName="packing_weight" readonly/></div>
                    <div class="label_col" *ngIf="potype_packing"><select formControlName="packing_type" class="form-control" (change)="onchangeLaminate($event, pointIndex)"><option value="LAMINATED">LAMINATED</option><option value="HDPE">HDPE</option><option value="ROLL">ROLL</option></select></div> -->

                    <div class="label_col"><input class="form-control" type="text" formControlName="packing_uom" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="packing_qty"
                        (focusout)="getPackingQty($event, pointIndex)" /></div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="stock_uom" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="stock_qty"
                        (focusout)="getItemQty($event, pointIndex)" />
                      <input class="form-control" type="hidden" formControlName="toleranceqty" readonly />
                    </div>

                    <div class="label_col"><input class="form-control" formControlName="con_factor" type="number" />
                    </div>

                    <div class="label_col"><input class="form-control" type="number" formControlName="mat_weight"
                        (keyup)="getMatWt($event, pointIndex)" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="price"
                        (keyup)="getPrice($event, pointIndex)" /></div>
                    <div class="label_col"><select class="form-control" formControlName="price_based_on"
                        (change)="onChangePriceBasedOn($event, pointIndex)">
                        <option value="0">-Select-</option>
                        <optgroup label="Packing">
                          <option value="Packing">Packing</option>
                        </optgroup>
                        <optgroup label="Item">
                          <option value="With Packing">WITH PACKING</option>
                          <option value="Without Packing">WITHOUT PACKING</option>
                        </optgroup>
                      </select></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="amount" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="taxable_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="discount"
                        (keyup)="getDiscount($event, pointIndex)" /></div>
                    <div class="label_col"><select class="form-control" formControlName="discount_basedon" type="text"
                        (change)="onchangeDiscountBasedOn($event, pointIndex)">
                        <option value="0">-Select-</option>
                        <option value="Uom">Uom</option>
                        <option value="%">%</option>
                      </select></div>
                    <div class="label_col"><input class="form-control" type="number"
                        formControlName="discount_amount" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="net_amount" />
                    </div>
                    <!-- <div class="label_col"><input class="form-control" type="text" formControlName="tax_code" /><i class="fa fa-external-link tax_insert_icon" (click)="showPopUp1(pointIndex)" aria-hidden="true"></i></div> -->
                    <div class="label_col"><input class="form-control" type="text" formControlName="tax_code" /></div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="tax_rate" /></div>

                    <div class="label_col"><input class="form-control" type="number" formControlName="tax_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="number" formControlName="total_amount" />
                    </div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="qc_norms" /><i
                        class="fa fa-external-link tax_insert_icon" (click)="showPopUp2(pointIndex)"
                        aria-hidden="true"></i></div>
                    <!--  <div class="label_col"><input class="form-control" type="text" formControlName="qc_norms" /></div> -->
                    <div class="label_col"> <select formControlName="priority" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let priority of priorities" [value]="priority">{{priority}}</option>
                      </select> </div>
                    <div class="label_col" *ngIf="_referenceNo != 'pur006' && _referenceNo != 'pur003'"><input
                        class="form-control date_col" type="date" formControlName="delivery_date" /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur003'"><input
                        class="form-control date_col" type="text" formControlName="delivery_date"
                        (change)="onChangeDeliveryDate($event, pointIndex, 'CFT')" /></div>
                    <div class="label_col"> <select formControlName="purpose" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let purp of purposes" [value]="purp.purpose_id">{{purp.purpose_name}}</option>
                      </select> </div>
                    <div class="label_col"> <select formControlName="to_be_used" class="form-control">
                        <option value="0">-Select-</option>
                        <option *ngFor="let whereUsed of deptNames" [value]="whereUsed.department_code">
                          {{whereUsed.department_name}}</option>
                      </select> </div>
                    <div class="label_col"><input class="form-control" type="text" formControlName="remarks" /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'"><input
                        class="form-control" type="text" formControlName="packing_list_req" readonly /></div>
                    <div class="label_col" *ngIf="_referenceNo == 'pur006' || _referenceNo == 'pur004'"><input
                        class="form-control" type="text" formControlName="packing_list" readonly /></div>
                  </div>
                </div>
              </ng-template>


            </div>
            <div class="btm_btn_content"
              *ngIf="(_referenceNo != 'pur006' && _referenceNo != 'pur004' && _referenceNo != 'pur003') && action == 'update'">
              <button type="button" (click)="addItem()" class="btn btn-success" [disabled]="disablerow">Add Row
              </button>
              <div class="clr"></div>
            </div>
          </mat-tab>

          <!-- new changes by mozahar -->

          <mat-tab label="Tax Information">
            <fieldset>
              <legend>Tax Information
                <div class="form-group" style="width: 150px; margin: 0;">
                  <!-- <mat-checkbox [(ngModel)]="model.registered" formControlName="registered" (change)="check2($event)" [checked]="isChecked2">Registered
          </mat-checkbox> -->
                </div>
              </legend>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label for="PAN No.">PAN No.</mat-label>
                  <input type="text" class="form-control" [(ngModel)]="model.pan_no" formControlName="pan_no">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label for="GST No.">GST No.</mat-label>
                  <input type="text" class="form-control" [(ngModel)]="model.gst_no" formControlName="gst_no">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label for="CIN No.">CIN No.</mat-label>
                  <input type="text" class="form-control" [(ngModel)]="model.cin_no" formControlName="cin_no">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label for="TAN No">TAN No</mat-label>
                  <input type="text" class="form-control" [(ngModel)]="model.tan_no" formControlName="tan_no">
                </div>
              </div>

            </fieldset>
          </mat-tab>

          <mat-tab label="Shipment Details">
            <fieldset>
              <legend>Ship To</legend>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label>Address Id</mat-label>
                  <mat-select class="form-control" [(ngModel)]="model.ship_to_addr_id" formControlName="ship_to_addr_id"
                    (selectionChange)="onChangeShipToAddId($event.value)">
                    <mat-option value="0">-Select-</mat-option>
                    <mat-option *ngFor="let list of bussiness_unit_list"
                      [value]="list.businessunit_id">{{list.businessunit_name}}</mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-lg-9 col-md-8 col-sm-6 col-12">
                <div class="form-group">
                  <label for="Address Id">Address</label>
                  <textarea class="form-control" [(ngModel)]="model.ship_to_addr" formControlName="ship_to_addr"
                    rows="1"></textarea>
                </div>
              </div>
            </fieldset>
            <fieldset>
              <legend>Pay To</legend>
              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label>Delivery From</mat-label>
                  <mat-select formControlName="pay_to_addr_id" [(ngModel)]="model.pay_to_addr_id" class="form-control"
                    (selectionChange)="onChangePayToDForm($event.value)">
                    <mat-option value="0">-Select-</mat-option>
                    <mat-option *ngFor="let list of payToDFrom" [value]="list.bu_name">{{list.bu_name}}</mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-lg-9 col-md-8 col-sm-6 col-12">
                <div class="form-group">
                  <label for="Address Id">Address</label>
                  <textarea class="form-control" [(ngModel)]="model.pay_to_addr" formControlName="pay_to_addr"
                    rows="1"></textarea>
                </div>
              </div>
            </fieldset>
          </mat-tab>

          <mat-tab label="Terms & Condition">
            <fieldset>
              <legend>Payment</legend>
              <div formGroupName="pur_Order_Terms_Con">
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Payment Mode</mat-label>
                    <mat-select class="form-control " formControlName="payment_mode"
                      (selectionChange)="onChangePaymentMode($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let payment_mode of payModes" [value]="payment_mode">{{payment_mode}}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-6 col-12" *ngIf="is_cash_limit_active">
                  <div class="form-group">
                    <mat-label>Cash Amt.</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="cash_limit">
                  </div>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>TCS Applicable</mat-label>
                    <mat-select formControlName="tcs_applicable" class="form-control"
                      (selectionChange)="onChangeTcsApplicable($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option value="No">NO</mat-option>
                      <mat-option value="Yes">YES</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12" *ngIf="isChecked">
                  <div class="form-group">
                    <mat-label>TCS Rate</mat-label>
                    <input type="number" formControlName="tcs_rate" class="form-control">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Payment Terms</mat-label>
                    <mat-select class="form-control " formControlName="payment_terms">
                      <mat-option *ngFor="let payTerm of payTerms"
                        [value]="payTerm.payterm_id">{{payTerm.payterm_desc}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Bank Name</mat-label>
                    <input type="text" class="form-control" formControlName="bank_name" />
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Account Holder Name</mat-label>
                    <input type="text" class="form-control" formControlName="account_name">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Account No</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="account_no">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Branch</mat-label>
                    <input type="text" class="form-control" formControlName="branch">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>IFSC Code</mat-label>
                    <input type="text" formControlName="ifsc" class="form-control">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Mobile Number</mat-label>
                    <input type="number" formControlName="mobile" class="form-control">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>IBAN</mat-label>
                    <input type="text" class="form-control" formControlName="iban">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>BIC/SWIFT Code</mat-label>
                    <input type="text" class="form-control" formControlName="bic_swift_code">
                  </div>
                </div>

              </div>
            </fieldset>

            <fieldset>
              <legend>Applicable Charges</legend>
              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label for="Payment Mode">Applicable Charges<span class="red">*</span></mat-label>
                  <mat-select class="form-control" formControlName="app_chgs_id" [(ngModel)]="appchargesgloble"
                    (selectionChange)="onChangeApplicableCharges($event.value)">
                    <mat-option *ngFor="let list of chargesIdList"
                      [value]="list.charge_id">{{list.charge_desc}}</mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-lg-12">
                <div class="dyn_table_conent">
                  <div class="dyn_table_header">
                    <label class="label_col">
                      <h3>Action</h3>
                    </label>
                    <label class="label_col">
                      <h3 class="wdt_fst">Charges Name</h3>
                    </label>
                    <label class="label_col">
                      <h3>Add/Less</h3>
                    </label>
                    <label class="label_col">
                      <h3 class="wdt_130">Rate Calculation Method</h3>
                    </label>
                    <label class="label_col">
                      <h3>Rate<span class="red">*</span></h3>
                    </label>
                    <label class="label_col">
                      <h3>Tax Rate(%)</h3>
                    </label>
                    <label class="label_col">
                      <h3>Required</h3>
                    </label>
                    <!-- <label class="label_col"><h3>Amount</h3></label> -->
                  </div>

                  <div class="dyn_table_data_cont" formArrayName="pur_Order_app_chgs">
                    <div class="dyn_table" *ngFor="let item of pur_Order_app_chgs.controls; let pointIndex=index"
                      [formGroupName]="pointIndex">
                      <div class="label_col"><i class="fa fa-trash form-control action"
                          (click)="delete(pointIndex)"></i></div>
                      <div class="label_col"><input formControlName="charges_name" class="form-control" type="text" />
                      </div>
                      <div class="label_col"><input type="text" class="form-control" formControlName="add_less"></div>
                      <!-- <div class="label_col"><mat-select type="text" class="form-control wdt_130_s" formControlName="rate_cal_method" (selectionChange)="onChangeRateCal(pointIndex,$event.value)"> -->
                      <div class="label_col"><mat-select type="text" class="form-control wdt_130_s"
                          formControlName="rate_cal_method">
                          <mat-option value="UOM">On UOM</mat-option>
                          <mat-option value="%">On %</mat-option>
                          <mat-option value="Fixed">Fixed</mat-option>
                        </mat-select></div>
                      <!-- <div class="label_col"><input type="text" class="form-control" formControlName="app_rate" (keyup)="getchargesrate($event, pointIndex)"></div> -->
                      <div class="label_col"><input type="text" class="form-control" formControlName="app_rate"
                          [readonly]="requiredmatrixdisable[pointIndex]"></div>
                      <div class="label_col"><input type="text" class="form-control" formControlName="tax_rate"
                          readonly></div>
                      <div class="label_col"><select formControlName="required" class="form-control wdt_form_130"
                          disabled>
                          <option value="0">Select</option>
                          <option value="Yes">Yes</option>
                          <option value="No">No</option>
                        </select></div>
                      <!-- <div class="label_col"><input class="form-control wdt_115_s" formControlName="amount" min="0" type="number" /></div> -->
                    </div>
                  </div>
                </div>
              </div>
            </fieldset>

            <fieldset>
              <legend>Terms & Conditions</legend>

              <div class="col-lg-12">
                <div class="dyn_table_conent">
                  <div class="dyn_table_header">
                    <label class="label_col">
                      <h3 class="act">Action</h3>
                    </label>
                    <label class="label_col">
                      <h3 class="srln">Sl. No.</h3>
                    </label>
                    <label class="label_col">
                      <h3 class="i_nam">Item Name</h3>
                    </label>
                    <label class="label_col">
                      <h3 style="width: 900%;">Description</h3>
                    </label>
                  </div>

                  <div class="dyn_table_data_cont" formArrayName="pur_order_terms_conditions">
                    <div class="dyn_table"
                      *ngFor="let item of pur_order_terms_conditions.controls; let pointIndex=index"
                      [formGroupName]="pointIndex">
                      <div class="label_col"><i class="fa fa-trash form-control action"
                          (click)="deleteTerms(pointIndex)"></i></div>

                      <div class="label_col">
                        <input class="form-control srln" formControlName="slno" type="number" readonly />
                      </div>

                      <div class="label_col">
                        <input type="text" class="form-control i_nam" formControlName="terms_name"
                          style="text-align: left;">
                      </div>

                      <div class="label_col"><input type="text" class="form-control"
                          style="width: 678px; text-align: left;" formControlName="description"></div>
                    </div>
                  </div>
                </div>

                <!-- <table border=1 class="dyn_table_conent">
                  <thead class="dyn_table_header">
                    <th>Action</th>
                    <th>Sl. No.</th>
                    <th>Item Name</th>
                    <th>Description</th>
                  </thead>
                  <tbody class="dyn_table_data_cont" formArrayName="pur_order_terms_conditions">
                    <tr class="dyn_table" 
                    *ngFor="let item of pur_order_terms_conditions.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                      <td><i class="fa fa-trash form-control action"
                        (click)="deleteTerms(pointIndex)"></i></td>
                      <td>
                        <input class="form-control" formControlName="slno" type="number" readonly />
                      </td>
                      <td>
                        <input class="form-control" formControlName="terms_name" value="Freight">
                      </td>
                      <td>
                        <input class="form-control"
                          formControlName="description" value="Inclusive in rate">
                      </td>
                    </tr>
                  </tbody>
                </table> -->

                <div class="btm_btn_content">
                  <button type="button" class="btn btn-success" (click)="addTerms()">Add Row </button>
                </div>

              </div>
            </fieldset>

          </mat-tab>

          <!-- <mat-tab label="Broker Details" *ngIf="model.broker_info == true"> -->
          <mat-tab label="Broker Details" *ngIf="showBrokerDetails">
            <div class="form-group" style="width: 150px; margin: 0;">
              <mat-checkbox [(ngModel)]="brokerage_active1" formControlName="brokerage_active" [value]="true">Brokerage
                Applicable</mat-checkbox>
            </div>
            <div class="dyn_table_conent">
              <div class="dyn_table_header">
                <label class="label_col">
                  <h3>Action</h3>
                </label>
                <label class="label_col">
                  <h3>Srl No</h3>
                </label>
                <label class="label_col">
                  <h3>Broker Name<span style="color:red">*</span></h3>
                </label>
                <label class="label_col">
                  <h3>Basis</h3>
                </label>
                <label class="label_col">
                  <h3>Rate</h3>
                </label>
                <label class="label_col">
                  <h3>Amount</h3>
                </label>
                <label class="label_col">
                  <h3>Tax Rate</h3>
                </label>
                <label class="label_col">
                  <h3>Tax Amt</h3>
                </label>
                <label class="label_col">
                  <h3>Total Amt</h3>
                </label>
                <label class="label_col">
                  <h3>Brokerage Account</h3>
                </label>
                <label class="label_col">
                  <h3>TDS Rate</h3>
                </label>
                <label class="label_col">
                  <h3>TDS Account</h3>
                </label>
              </div>

              <div class="dyn_table_data_cont" formArrayName="pur_Order_broker">
                <div class="dyn_table" *ngFor="let item of pur_Order_broker.controls; let pointIndex=index"
                  [formGroupName]="pointIndex">
                  <div class="label_col"><i class="fa fa-trash form-control action"
                      (click)="deleteBroker(pointIndex)"></i> </div>
                  <div class="label_col"><input formControlName="sl_no" class="form-control" readonly /></div>
                  <div class="label_col"><mat-select formControlName="ven_code_name" class="form-control"
                      (selectionChange)="onChangeBrokerName(pointIndex, $event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of brokerNameList"
                        [value]="list.ven_code_name">{{list.ven_name}}</mat-option>
                    </mat-select></div>
                  <!-- <div class="label_col"><input type="text" formControlName="basis" class="form-control" /></div> -->
                  <div class="label_col"> <select formControlName="basis" class="form-control">
                      <option value="0">-Select-</option>
                      <option value="QTLS">QTLS</option>
                      <option value="Bags">Bags</option>
                    </select> </div>
                  <div class="label_col"><input formControlName="rate" class="form-control" min="0" type="number" />
                  </div>
                  <div class="label_col"><input formControlName="amount" class="form-control" min="0" type="number"
                      [readonly]="model.brokerage_active != true" /> </div>
                  <div class="label_col"><input formControlName="tax_rate" class="form-control" min="0" type="number"
                      [readonly]="model.brokerage_active != true" /> </div>
                  <div class="label_col"><input formControlName="tax_amount" class="form-control" min="0" type="number"
                      [readonly]="model.brokerage_active != true" /> </div>
                  <div class="label_col"><input formControlName="total_amount" class="form-control" min="0"
                      type="number" [readonly]="model.brokerage_active != true" /> </div>
                  <div class="label_col"><mat-select class="form-control" formControlName="brokerage_acc" type="text"
                      [disabled]="true">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of ledgerNames"
                        [value]="list.ledgerid">{{list.ledgername}}</mat-option>
                    </mat-select></div>
                  <div class="label_col"><input class="form-control" formControlName="tds_rate" type="number" /></div>
                  <div class="label_col"><mat-select class="form-control" formControlName="tds_acc" type="text"
                      [disabled]="true">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of ledgerNames"
                        [value]="list.ledgerid">{{list.ledgername}}</mat-option>
                    </mat-select></div>
                </div>
              </div>
            </div>
            <div class="btm_btn_content" *ngIf="(model.brokerage_active == true) && action == 'update'">
              <button type="button" class="btn btn-success" (click)="addBroker(pointIndex)">Add Row
              </button>
              <div class="clr"></div>
            </div>
          </mat-tab>

          <!-- <mat-tab label="Transport Information">
            <div formGroupName="pur_Order_Trans_Infos">
              <fieldset class="dnmk">
                <legend>Transport Information</legend>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Transport Borne By</mat-label>
                    <mat-select class="form-control " formControlName="trans_borne_by" (selectionChange)="onChangeTransportBorneBy($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let trans_borne_by of transBrone" [value]="trans_borne_by">{{trans_borne_by}}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Mode Of Transport</mat-label>
                    <mat-select class="form-control " formControlName="mode_of_trans" [disabled]="isTranporterInfoIsDisabled">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let mode_of_trans of modeOfTransport" [value]="mode_of_trans">  {{mode_of_trans}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>From</mat-label>
                    <mat-select type="text" formControlName="transport_from" class="form-control">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of areaList" [value]="list.area_name">{{list.area_name}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>To</mat-label>
                    <mat-select type="text" formControlName="transport_to" class="form-control">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of areaList" [value]="list.area_name">{{list.area_name}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Transporter Name</mat-label>
                    <mat-select type="text" formControlName="transporter_name" class="form-control" [disabled]="isTranporterInfoIsDisabled" (selectionChange)="OnChangeTransporterName($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let transporterName of transporterNames" [value]="transporterName.bp_Id">{{transporterName.bp_name}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Transportation Rate</mat-label>
                    <mat-select class="form-control " formControlName="transport_rate" [disabled]="isTranporterInfoIsDisabled">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let transport_rate of transRate" [value]="transport_rate">{{transport_rate}}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                 <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label for="Charge Code">Charge Code</mat-label>
                    <input class="form-control" formControlName="charge_code" value = {{chargeCode}}/>
                  </div>
                </div>

                 <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Charge Code</mat-label>
                      <mat-select-autocomplete class="form-control ats" 
                      [options]="ChargeList"
                      [display]="'trans_charge_code'"
                      [value]="'trans_charge_code'"
                      [multiple]='false'
                      ngDefaultControl
                      (selectionChange)="onchangeChargeCode($event)"
                      [formControl] = "pur_Order_Trans_Infos.controls['charge_code']">
                      </mat-select-autocomplete>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Rate Value</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="rate_value" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>
              </fieldset>

              <fieldset class="dnmk">
                <legend>Payment</legend>
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Payment Mode</mat-label>
                    <mat-select class="form-control" formControlName="payment_mode" [disabled]="isTranporterInfoIsDisabled">
                      <mat-option value="0">-Select Payment Mode-</mat-option>
                      <mat-option *ngFor="let payment_mode of payModes" [value]="payment_mode">{{payment_mode}}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-3 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Cash Amt.</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="cash_limit" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Payment Terms</mat-label>
                    <mat-select class="form-control " formControlName="payment_terms" [disabled]="isTranporterInfoIsDisabled">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let payTerm of payTerms" [value]="payTerm.payterm_id">{{payTerm.payterm_desc}}</mat-option>
                    </mat-select>
                  </div>
                </div>
                
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Bank Name</mat-label>
                    <input type="text" class="form-control" formControlName="bank_name" [readonly]="isTranporterInfoIsDisabled"/>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Account Holder Name</mat-label>
                    <input type="text" class="form-control" formControlName="account_name" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Account No</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="account_no" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Branch</mat-label>
                    <input type="text" class="form-control" formControlName="branch" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>IFSC Code</mat-label>
                    <input type="text" formControlName="ifsc_code" class="form-control" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Mobile Number</mat-label>
                    <input type="number" formControlName="mobile" class="form-control" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>IBAN</mat-label>
                    <input type="text" class="form-control" formControlName="iban" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>BIC/SWIFT Code</mat-label>
                    <input type="text" class="form-control" formControlName="bic_swift_code" [readonly]="isTranporterInfoIsDisabled">
                  </div>
                </div>

              </fieldset>
            </div>
          </mat-tab> -->

          <mat-tab label="Transport Charges">
            <div>
              <fieldset class="dnmk">
                <legend>Transport Charges</legend>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Transport Borne By</mat-label>
                    <mat-select class="form-control " formControlName="trans_borne_by_chgs"
                      (selectionChange)="onChangeTransBrone($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let trans_borne_by of transBrone" [value]="trans_borne_by">{{trans_borne_by}}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-12" *ngIf="transportCharges">
                  <div class="dyn_table_conent">
                    <div class="dyn_table_header">
                      <label class="label_col">
                        <h3>Action</h3>
                      </label>
                      <label class="label_col">
                        <h3 class="srln">Sl No.</h3>
                      </label>
                      <label class="label_col">
                        <h3>Mode of Transport</h3>
                      </label>
                      <label class="label_col">
                        <h3>From</h3>
                      </label>
                      <label class="label_col">
                        <h3>To</h3>
                      </label>
                      <label class="label_col">
                        <h3>Transporter Name</h3>
                      </label>
                      <label class="label_col">
                        <h3>Transportation Rate</h3>
                      </label>
                      <label class="label_col">
                        <h3>Charge Code</h3>
                      </label>
                      <label class="label_col">
                        <h3>Rate Value</h3>
                      </label>
                      <label class="label_col">
                        <h3>Remarks</h3>
                      </label>
                      <label class="label_col">
                        <h3>Distance(km)</h3>
                      </label>
                      <label class="label_col">
                        <h3>UOM</h3>
                      </label>
                      <label class="label_col">
                        <h3 class="wdt_164">Tax Code</h3>
                      </label>
                      <label class="label_col">
                        <h3>Tax Rate(%)</h3>
                      </label>
                      <label class="label_col">
                        <h3>Transportation Acc.</h3>
                      </label>
                      <label class="label_col">
                        <h3>TDS Code</h3>
                      </label>
                      <label class="label_col">
                        <h3>TDS Rate</h3>
                      </label>
                      <label class="label_col">
                        <h3>TDS Acc.</h3>
                      </label>
                      <label class="label_col">
                        <h3>Allowed Shortage</h3>
                      </label>
                      <label class="label_col">
                        <h3>Deduction Based On</h3>
                      </label>
                      <label class="label_col">
                        <h3>Charges Code</h3>
                      </label>
                    </div>

                    <div class="dyn_table_data_cont" formArrayName="pur_Order_Trans_Chgs_dyn">
                      <div class="dyn_table"
                        *ngFor="let charge of pur_Order_Trans_Chgs_dyn.controls; let pointIndex=index"
                        [formGroupName]="pointIndex">
                        <div class="label_col"><i class="fa fa-trash form-control action"
                            (click)="deleteChgs(pointIndex)"></i> </div>
                        <div class="label_col"><input class="form-control srln" type="number" formControlName="slno"
                            readonly /></div>

                        <div class="label_col"><select formControlName="mode_of_trans" class="form-control">
                            <option value="0">-Select-</option>
                            <option *ngFor="let trans of modeOfTransport" [value]="trans">{{trans}}</option>
                          </select></div>
                        <div class="label_col"><select formControlName="transport_from" class="form-control">
                            <option value="0">-Select-</option>
                            <option *ngFor="let list of areaList" [value]="list.area_name">{{list.area_name}}</option>
                          </select>
                        </div>

                        <div class="label_col"><select formControlName="transport_to" class="form-control">
                            <option value="0">-Select-</option>
                            <option *ngFor="let list of areaList" [value]="list.area_name">{{list.area_name}}</option>
                          </select></div>
                        <div class="label_col"><select formControlName="transporter_name" class="form-control"
                            (change)="OnChangeTransporterNameChgs($event.target.value, pointIndex)">
                            <option value="0">-Select-</option>
                            <option *ngFor="let transporterName of transporterNames" [value]="transporterName.bp_Id">
                              {{transporterName.bp_name}}</option>
                          </select></div>
                        <div class="label_col"><select formControlName="transport_rate" class="form-control"
                            (change)="OnChangeTransportatinRate($event.target.value, pointIndex)">
                            <option value="0">-Select-</option>
                            <option *ngFor="let transport_rate of transRate" [value]="transport_rate">{{transport_rate}}
                            </option>
                          </select></div>
                        <div class="label_col">
                          <mat-select-autocomplete class="form-control ats" [options]="ChargeList[pointIndex]"
                            [display]="'trans_charge_code'" [value]="'trans_charge_code'" [multiple]='false'
                            ngDefaultControl [selectedOptions]="selectedChgCode[pointIndex]"
                            (selectionChange)="onchangeTransChargeCode(pointIndex, $event)"
                            [formControlName]="'charge_code'">
                          </mat-select-autocomplete>
                        </div>
                        <div class="label_col">
                          <input type="number" min="0" class="form-control" formControlName="chgs_rate_value">
                        </div>
                        <div class="label_col">
                          <input type="text" class="form-control" formControlName="chgs_remarks">
                        </div>

                        <div class="label_col"><input class="form-control" min="0" type="number"
                            formControlName="distance_in_km" /></div>
                        <div class="label_col"><select formControlName="uom" class="form-control">
                            <option *ngFor="let uom of uoms" [value]="uom.customuom_id">{{uom.description}}</option>
                          </select></div>
                        <div class="label_col"><input class="form-control wdt_form_164" type="text"
                            formControlName="tax_code" style="text-align: left;" /><i
                            class="fa fa-external-link tax_insert_icon" (click)="showPopUp1(pointIndex)"
                            aria-hidden="true"></i></div>
                        <div class="label_col"><input class="form-control" type="text" formControlName="tax_rate"
                            readonly /></div>
                        <div class="label_col">
                          <mat-select-autocomplete class="form-control" [options]="ledgerNames" [display]="'ledgername'"
                            [value]="'ledgerid'" [multiple]='false' [selectedOptions]="selectedTransacc[pointIndex]"
                            (selectionChange)="getTransacc($event,pointIndex)" ngDefaultControl
                            [formControlName]="'transportation_acc'">
                          </mat-select-autocomplete>
                        </div>

                        <div class="label_col"> <select formControlName="tds_code" class="form-control"
                            (change)="onchangeTdsCode($event, pointIndex)">
                            <option *ngFor="let list of tdscode" [value]="list.tds_id">{{list.tds_type}}</option>
                          </select> </div>
                        <div class="label_col"><input class="form-control" type="number" formControlName="tds_rate"
                            readonly /></div>

                        <div class="label_col">
                          <mat-select-autocomplete class="form-control" [options]="ledgerNames" [display]="'ledgername'"
                            [value]="'ledgerid'" [multiple]='false' [selectedOptions]="selectedTdsacc[pointIndex]"
                            (selectionChange)="getTdsacc($event,pointIndex)" ngDefaultControl
                            [formControlName]="'tds_acc'">
                          </mat-select-autocomplete>
                        </div>



                        <div class="label_col"><input class="form-control" type="number"
                            formControlName="allowed_shortage" /></div>
                        <div class="label_col"><select formControlName="deduction_basedon" class="form-control">
                            <option value="0">-Select-</option>
                            <option value="Full Shortage">Full Shortage</option>
                            <option value="Excess Shortage">Excess Shortage</option>
                          </select></div>

                        <div class="label_col"><select formControlName="charge_id" class="form-control">
                            <option value="0">-Select-</option>
                            <option *ngFor="let list of listCharges" [value]="list.charge_id">{{list.charge_desc}}
                            </option>
                          </select>
                        </div>




                      </div>
                    </div>
                  </div>
                  <div class="btm_btn_content">
                    <button type="button" (click)="addChgs()" class="btn btn-success">Add Row </button>
                  </div>
                </div>
              </fieldset>
            </div>
          </mat-tab>


          <mat-tab label="Business Partner Details">
            <div formGroupName="pur_Order_BPDetails">
              <fieldset class="dnmk">
                <legend>Supplier Information</legend>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Name</mat-label>
                    <mat-select type="text" formControlName="supp_name" class="form-control"
                      (selectionChange)="onChangeSuppInfoName($event.value)">
                      <mat-option>-Select-</mat-option>
                      <mat-option *ngFor="let list of contAddrs"
                        [value]="list.contact_person">{{list.contact_person}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Phone No.</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="supp_phone">
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Fax</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="supp_fax">
                  </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>E-Mail</mat-label>
                    <input type="email" class="form-control" formControlName="supp_email">
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <mat-label>Address</mat-label>
                    <textarea class="form-control" formControlName="supp_address" rows="1"></textarea>
                  </div>
                </div>
              </fieldset>

              <fieldset class="dnmk">
                <legend>Contact Person Information</legend>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Name</mat-label>
                    <mat-select type="text" formControlName="cp_name" class="form-control"
                      (selectionChange)="onChangeContInfoName($event.value)">
                      <mat-option value="0">-Select-</mat-option>
                      <mat-option *ngFor="let list of delvAddrs"
                        [value]="list.contact_person">{{list.contact_person}}</mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Designation</mat-label>
                    <input type="text" class="form-control" formControlName="cp_designation">
                  </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Phone No.</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="cp_phone">
                  </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>Fax</mat-label>
                    <input type="number" min="0" class="form-control" formControlName="cp_fax">
                  </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                  <div class="form-group">
                    <mat-label>E-Mail</mat-label>
                    <input type="email" class="form-control" formControlName="cp_email">
                  </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <mat-label>Address</mat-label>
                    <textarea class="form-control" formControlName="cp_address" rows="1"></textarea>
                  </div>
                </div>
              </fieldset>
            </div>
          </mat-tab>


          <mat-tab label="Document Attachment">
            <div class="col-lg-8 col-md-8 col-sm-6 col-12">
              <div class="dyn_table_conent" style="float: left;">
                <div class="dyn_table_header">
                  <label class="label_col">
                    <h3>Action</h3>
                  </label>
                  <label class="label_col">
                    <h3>Document Name</h3>
                  </label>
                  <label class="label_col">
                    <h3 class="wdt_220">Document Upload</h3>
                  </label>
                </div>
                <div class="dyn_table_data_cont" formArrayName="pur_Order_docs">
                  <div class="dyn_table" *ngFor="let item of pur_Order_docs.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                    <div class="label_col"><i class="fa fa-trash form-control action"
                        (click)="deleteDocument(pointIndex)"></i></div>
                    <div class="label_col"><input formControlName="doc_name" class="form-control" type="text" /></div>
                    <!-- <div class="label_col"><input class="form-control wdt_220_s" type="file" /></div> -->
                    <div class="label_col"><input class="form-control  wdt_220_s"
                        (change)="onFileSelected($event,pointIndex,pur_Order_docs.controls)" #myFileInput type="file" />
                    </div>
                  </div>
                </div>
              </div>

              <div class="btm_btn_content" *ngIf="action == 'update'">
                <button type="button" class="btn btn-success" (click)="addDocument(pointIndex)">Add </button>
              </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6 col-12">
              <fieldset>
                <legend>Document List</legend>
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                  <div class="form-group">
                    <textarea class="form-control" rows="1"></textarea>
                  </div>
                </div>
              </fieldset>
            </div>
          </mat-tab>

          <mat-tab label="Approval">
            <div class="col-lg-3 col-md-3 col-sm-6 col-12">
              <div class="form-group">
                <mat-label>Confirmed By<span class="red">*</span></mat-label>
                <mat-select class="form-control" formControlName="confirmed_by" [(ngModel)]="model.confirmed_by"
                  type="text">
                  <mat-option value="0">-Select-</mat-option>
                  <mat-option *ngFor="let confirmedBy of employeeNames" [value]="confirmedBy.emp_id">
                    {{confirmedBy.emp_name}}</mat-option>
                </mat-select>
              </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-12">

              <div class="form-group">
                <mat-label>Approved<span class="red">*</span></mat-label>
                <mat-select class="form-control " [(ngModel)]="model.approved" formControlName="approved">
                  <mat-option>-Select Approved-</mat-option>
                  <mat-option *ngFor="let approved of approve" [value]="approved">{{approved}}</mat-option>
                </mat-select>
              </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-12">

              <div class="form-group">
                <mat-label>Reason<span class="red">*</span></mat-label>
                <mat-select class="form-control " [(ngModel)]="model.reason" formControlName="reason">
                  <mat-option value="0">-Select-</mat-option>
                  <mat-option *ngFor="let list of reasonList" [value]="list.reason_id">{{list.reason}}</mat-option>
                </mat-select>
              </div>
            </div>

            <!-- changes on 09-05-2022 -->
            <!-- <div class="col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="form-group">
                <mat-label>Remarks</mat-label>
                <textarea class="form-control" [(ngModel)]="model.remarks" formControlName="remarks"  rows="1"></textarea>
              </div>
            </div> -->
          </mat-tab>

          <mat-tab label="Termination">
            <div formGroupName="pur_Order_Terminations">
              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group chk_tp_pad">
                  <mat-checkbox formControlName="term_pur_ord" (change)="onChangeTPOrder($event, 'CFT')"> Termination
                    Purchase Order</mat-checkbox>
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label>Order By</mat-label>
                  <mat-select type="text" formControlName="order_by" class="form-control"
                    [disabled]="!is_tporder_checked">
                    <mat-option *ngFor="let orderBy of employeeNames" [value]="orderBy.emp_id">{{orderBy.emp_name}}
                    </mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <div class="form-group">
                  <mat-label>Charges Description</mat-label>
                  <mat-select class="form-control" formControlName="charges_descpt"
                    (selectionChange)="onChangeReason($event.value)" [disabled]="!is_tporder_checked">
                    <mat-option *ngFor="let list of chargesIdList"
                      [value]="list.charge_id">{{list.charge_desc}}</mat-option>
                  </mat-select>
                </div>
              </div>
            </div>

            <div class="clr"></div>
            <div class="col-lg-12">
              <div class="dyn_table_conent">
                <div class="dyn_table_header">
                  <label class="label_col">
                    <h3 class="wdt_fst">Charges Name</h3>
                  </label>
                  <label class="label_col">
                    <h3>Termination Calculation Method</h3>
                  </label>
                  <label class="label_col">
                    <h3>Method</h3>
                  </label>
                  <label class="label_col">
                    <h3>Calculation Qty</h3>
                  </label>
                  <label class="label_col">
                    <h3>Quantity</h3>
                  </label>
                  <label class="label_col">
                    <h3>Amount</h3>
                  </label>
                  <label class="label_col">
                    <h3>Rate</h3>
                  </label>
                  <label class="label_col">
                    <h3>GL Account</h3>
                  </label>
                  <label class="label_col">
                    <h3>Tax Rate(%)</h3>
                  </label>
                  <label class="label_col">
                    <h3>Tax Amt</h3>
                  </label>
                  <label class="label_col">
                    <h3>Total Amt</h3>
                  </label>
                </div>

                <div class="dyn_table_data_cont" formArrayName="pur_Order_Terminations_dyn"
                  [hidden]="is_tporder_checked == false">
                  <div class="dyn_table" *ngFor="let item of pur_Order_Terminations_dyn.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                    <div class="label_col"><input formControlName="charge_name" class="form-control" type="text" />
                    </div>
                    <div class="label_col"><select class="form-control" formControlName="termination_cal">
                        <option value="0">-Select-</option>
                        <option *ngFor="let rate_cal of basislist" [value]="rate_cal">{{rate_cal}}</option>
                      </select></div>
                    <div class="label_col"><select class="form-control" formControlName="method">
                        <option value="0">-Select-</option>
                        <option>add</option>
                        <option>less</option>
                      </select></div>
                    <div class="label_col"><select class="form-control" formControlName="cal_qty">
                        <option value="0">-Select-</option>
                        <option>On pending Qty</option>
                        <option>On total Qty</option>
                      </select></div>
                    <div class="label_col"><input class="form-control wdt_115_s" formControlName="qty" min="0"
                        type="number"></div>
                    <div class="label_col"><input class="form-control wdt_115_s" formControlName="amount" min="0"
                        type="number"></div>
                    <div class="label_col"><input class="form-control wdt_115_s" formControlName="rate" min="0"
                        type="number"></div>
                    <div class="label_col"><select class="form-control" formControlName="gl_account">
                        <option value="0">-Select-</option>
                        <option *ngFor="let list of ledgerNames" [value]="list.ledgerid">{{list.ledgername}}</option>
                      </select></div>
                    <div class="label_col"><input class="form-control" formControlName="tax_rate" min="0" type="number">
                    </div>
                    <div class="label_col"><input class="form-control wdt_115_s" formControlName="tax_amount" min="0"
                        type="number"></div>
                    <div class="label_col"><input class="form-control wdt_115_s" formControlName="total_amount" min="0"
                        type="number"></div>
                  </div>
                </div>
              </div>
            </div>

            <div class="clr"></div>
            <div formGroupName="pur_Order_Terminations">
              <div class="col-lg-6 col-md-12 col-sm-12 col-12">
                <div class="form-group">
                  <mat-label>Reason</mat-label>
                  <mat-select class="form-control" formControlName="reason" [disabled]="!is_tporder_checked">
                    <mat-option value="0">-Select-</mat-option>
                    <mat-option *ngFor="let list of reasonList" [value]="list.reason_id">{{list.reason}}</mat-option>
                  </mat-select>
                </div>
              </div>


              <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="form-group">
                  <mat-label>Remarks</mat-label>
                  <textarea class="form-control" formControlName="remarks" rows="1"
                    [readonly]="!is_tporder_checked"></textarea>
                </div>
              </div>

              <div class="clr"></div>
              <div class="col-lg-3 col-md-4 col-sm-6 col-12 dnmk">
                <div class="form-group">
                  <mat-label>Total Termination Charge</mat-label>
                  <input type="number" min="0" formControlName="tot_term_chg" class="form-control"
                    [readonly]="!is_tporder_checked">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12 dnmk">
                <div class="form-group">
                  <mat-label>Add</mat-label>
                  <input type="number" min="0" formControlName="term_add" class="form-control"
                    [readonly]="!is_tporder_checked">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12 dnmk">
                <div class="form-group">
                  <mat-label>Deduct</mat-label>
                  <input type="number" min="0" formControlName="term_deduct" class="form-control"
                    [readonly]="!is_tporder_checked">
                </div>
              </div>

              <div class="col-lg-3 col-md-4 col-sm-6 col-12 dnmk">
                <div class="form-group">
                  <mat-label>Net Termination Charge</mat-label>
                  <input type="number" min="0" formControlName="net_term_chg" class="form-control"
                    [readonly]="!is_tporder_checked">
                </div>
              </div>

            </div>
          </mat-tab>

          <mat-tab label="Remarks">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
              <div class="form-group">
                <mat-label>Remarks</mat-label>
                <textarea class="form-control" [(ngModel)]="model.remarks" formControlName="remarks"
                  rows="1"></textarea>
              </div>
            </div>
          </mat-tab>

          <mat-tab label="Store Charges">
            <div class="col-lg-3 col-md-4 col-sm-6 col-12">
              <div class="form-group">
                <mat-label for="Payment Mode">Store Charges</mat-label>
                <mat-select class="form-control" formControlName="store_charges"
                  (selectionChange)="onChangeStoreCharges($event.value)">
                  <mat-option value="0">-Select-</mat-option><mat-option *ngFor="let list of storeChargesList"
                    [value]="list.store_charge_id">{{list.store_charge_desc}}</mat-option>
                </mat-select>
              </div>
            </div>
            <div class="col-lg-12">
              <div class="dyn_table_conent">
                <div class="dyn_table_header">
                  <label class="label_col">
                    <h3>Action</h3>
                  </label>
                  <label class="label_col">
                    <h3 class="i_nam">Charges Name</h3>
                  </label>
                  <label class="label_col">
                    <h3 class="i_nam">Charges Account</h3>
                  </label>
                  <label class="label_col">
                    <h3>Amount</h3>
                  </label>
                  <label class="label_col">
                    <h3>Tax Rate(%)</h3>
                  </label>
                  <label class="label_col">
                    <h3>@CGST</h3>
                  </label>
                  <label class="label_col">
                    <h3>@SGST</h3>
                  </label>
                  <label class="label_col">
                    <h3>@IGST</h3>
                  </label>
                </div>

                <div class="dyn_table_data_cont" formArrayName="pur_order_store_chgs">
                  <div class="dyn_table" *ngFor="let item of pur_order_store_chgs.controls; let pointIndex=index"
                    [formGroupName]="pointIndex">
                    <div class="label_col"><i class="fa fa-trash form-control action"
                        (click)="deleteStoreCharge(pointIndex)"></i></div>
                    <div class="label_col"><input class="form-control i_nam" type="text" formControlName="charges_name"
                        readonly /></div>
                    <div class="label_col"><input type="text" class="form-control i_nam" formControlName="charges_acc"
                        readonly></div>
                    <div class="label_col"><input type="number" class="form-control" formControlName="store_amount"
                        (keyup)="onChangeStoreTax(pointIndex)"></div>
                    <div class="label_col"><input type="number" class="form-control" formControlName="store_taxrate"
                        (keyup)="onChangeStoreTax(pointIndex)"></div>
                    <div class="label_col"><input type="number" class="form-control" formControlName="store_cgst"
                        readonly></div>
                    <div class="label_col"><input type="number" class="form-control" formControlName="store_sgst"
                        readonly></div>
                    <div class="label_col"><input type="number" class="form-control" formControlName="store_igst"
                        readonly></div>

                  </div>
                </div>
              </div>
            </div>


          </mat-tab>

        </mat-tab-group>
      </div>
      <div class="col-lg-12" *ngIf="action == 'update'">
        <div class="form-group">
          <button type="submit" (click)="send()" class="btn btn-primary" *ngIf="purchaseordersave">Submit</button>
        </div>
      </div>
    </div>
  </section>
</form>


<div class="master_container_box" *ngIf="isHidden==false">

  <form [formGroup]="userForm1">

    <div class="col-lg-3 col-md-4 col-sm-6 col-12">
      <div class="form-group">
        <mat-label>Order No.</mat-label>
        <input type="text" formControlName="order1_no" class="form-control" />
      </div>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-12">
      <div class="form-group">
        <mat-label>From Date</mat-label>
        <input type="date" class="form-control" formControlName="fromdate">
      </div>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-12">
      <div class="form-group">
        <mat-label>To Date</mat-label>
        <input type="date" class="form-control" formControlName="todate">
      </div>
    </div>

    <div class="col-lg-3 col-md-4 col-sm-6 col-12">
      <div class="form-group">
        <mat-label>Supplier Name</mat-label>
        <mat-select-autocomplete class="form-control ats" [options]="supplierNames" [display]="'bp_name'"
          [value]="'bp_Id'" [multiple]='false' ngDefaultControl [formControl]="userForm1.controls['supplier_name1']">
          >
        </mat-select-autocomplete>


      </div>
    </div>

    <div class="col-lg-12">
      <div class="form-group">
        <button type="submit" class="btn btn-primary" (click)="search()">Search</button>
      </div>
    </div>
  </form>


  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-12">
        <fieldset class="table_container">
          <legend>Purchase Order List</legend>
          <div class="table_content">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Purchase Order No</th>
                  <th>Order Date</th>
                  <th>Supplier</th>
                  <th>Business Unit</th>
                  <th>PO Type</th>
                  <th>PO Sub Type</th>
                  <th>Advice Req</th>
                  <th>PO Status</th>
                  <th colspan="5">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let PurchaseOrder of listPurchaseOrder">
                  <td>{{PurchaseOrder.pur_order_no}}</td>
                  <td>{{PurchaseOrder.ord_date}}</td>
                  <td>{{PurchaseOrder.supplier}}</td>
                  <td>{{PurchaseOrder.businessunit_name}}</td>
                  <td>{{PurchaseOrder.ser_item_subtype_name}}</td>
                  <td>{{PurchaseOrder.pur_ord_type}}</td>
                  <td>{{PurchaseOrder.advice_req}}</td>
                  <td>{{PurchaseOrder.po_status}}</td>

                  <td><button class="btn btn-success"
                      (click)="onUpdate(PurchaseOrder.id, PurchaseOrder.pur_orderid, 'view')"
                      *ngIf="purchaseorderview">View</button></td>
                  <td>
                    <div *ngIf="PurchaseOrder.po_status != 'Closed';else elseBlock">

                      <button class="btn btn-info"
                        (click)="onUpdate(PurchaseOrder.id, PurchaseOrder.pur_orderid, 'update')"
                        *ngIf="purchaseorderupdate">Update</button>
                    </div>

                    <ng-template #elseBlock>
                      <div>
                        <button class="btn btn-info" [disabled]="true">Update</button>
                      </div>
                    </ng-template>
                  </td>
                  <td><button class="btn btn-danger" (click)="onDelete(PurchaseOrder.id,PurchaseOrder.pur_orderid)"
                      *ngIf="purchaseorderdelete">Delete</button></td>
                  <td>
                    <button class="btn btn-info"
                      (click)="printpo(PurchaseOrder.id, PurchaseOrder.pur_orderid,PurchaseOrder.businessunit)">Print</button>
                  </td>
                  <td *ngIf="PurchaseOrder.ser_item_subtype == 'ITMT00009'">
                    <button class="btn btn-info" (click)="adjustjw(PurchaseOrder.id, PurchaseOrder.pur_orderid)">Adjust
                      Jw</button>
                  </td>


                </tr>
              </tbody>
            </table>
          </div>
        </fieldset>
      </div>
    </div>
    <!-- <div class="col-lg-12 pagination_content">
      <mat-paginator [pageSizeOptions]="[10, 25, 100]" [pageSize]="10" [length]="totalElements"
        (page)="nextPage($event)">
 
    </mat-paginator>
    </div> -->
  </div>

  <!-- <div class="label_col">
    <input  class="form-control  wdt_220_s"   (change)="onFileSelectedstatemaster($event)" #myFileInput  type="file" />
  </div> -->

</div>